<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>La grille harmonique depuis la version 2.23.10 - MyRealBook </title>
        
        <meta name="robots" content="noindex,nofollow" />
        <meta name="generator" content="Publii Open-Source CMS for Static Site" />

        
        
        <link rel="alternate" type="application/atom+xml" href="https://myrealbook.vintherine.org/feed.xml" />
<link rel="alternate" type="application/json" href="https://myrealbook.vintherine.org/feed.json" />

        <meta property="og:title" content="La grille harmonique depuis la version 2.23.10" /><meta property="og:site_name" content="MyRealBook" /><meta property="og:description" content="Comme évoqué dans le post précédant la grille harmonique est maintenant intégrée dans l'application. Par rapport à la fonction écrite en sheme décrite ici il y a quelques évolutions significatives.Les plus importantes sont l'utilisation de la notation proportionnelle qui permet d'avoir des cases exactement de même longueurs d'une ligne à l'autre (pour autant qu'il y en ait le même nombre) et un contexte particulier (ChordGridScore) permettant d'associer une grille à d'autre contexte tels Staff, RhythmicStaff ou Dynamics. \new ChordGridScore &lt;&lt;  \new ChordGrid \chordmode { ../.. }  % \new RhythmicStaff ou \new Dynamics...&gt;&gt;" /><meta property="og:url" content="https://myrealbook.vintherine.org/la-grille-harmonique-version-22310-et-suivantes.html" /><meta property="og:type" content="article" />
        <style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style>
        <link rel="stylesheet" href="https://myrealbook.vintherine.org/assets/css/style.css?v=489237eb5e2f09dd77c9332d52b3a5e5">       
        <script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://myrealbook.vintherine.org/la-grille-harmonique-version-22310-et-suivantes.html"},"headline":"La grille harmonique depuis la version 2.23.10","datePublished":"2022-08-01T12:26","dateModified":"2022-08-03T19:29","description":"Comme évoqué dans le post précédant la grille harmonique est maintenant intégrée dans l'application. Par rapport à la fonction écrite en sheme décrite ici il y a quelques évolutions significatives.Les plus importantes sont l'utilisation de la notation proportionnelle qui permet d'avoir des cases exactement de même longueurs d'une ligne à l'autre (pour autant qu'il y en ait le même nombre) et un contexte particulier (ChordGridScore) permettant d'associer une grille à d'autre contexte tels Staff, RhythmicStaff ou Dynamics. \\new ChordGridScore &lt;&lt;  \\new ChordGrid \\chordmode { ../.. }  % \\new RhythmicStaff ou \\new Dynamics...&gt;&gt;","author":{"@type":"Person","name":"Vincent","url":"https://myrealbook.vintherine.org/authors/vincent/"},"publisher":{"@type":"Organization","name":"Vincent"}}</script>        
        
        <link type="application/atom+xml" rel="alternate" href="https://myrealbook.vintherine.org/feed.xml"/>
<link type="application/json" rel="alternate" href="https://myrealbook.vintherine.org/feed.json"/>
    </head>
    <body>
        <header class="header" id="js-header">

   <a href="https://myrealbook.vintherine.org/" class="logo">
         MyRealBook
   </a>

      <nav class="navbar js-navbar">
         <button class="navbar__toggle js-toggle" aria-label="Menu">
            <span class="navbar__toggle-box">
               <span class="navbar__toggle-inner">Menu</span>
            </span>
         </button>
         <ul class="navbar__menu">
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/index.html"
                        target="_self"
         >
                     Blog
                  </a>
         
            </li>
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/myrealbook-les-partitions.html"
                        target="_self"
         >
                     Partitions
                  </a>
         
            </li>
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/about.html"
                        target="_self"
         >
                     À propos
                  </a>
         
            </li>
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/feed.xml"
                        target="_self"
         >
                     Flux RSS
                  </a>
         
            </li>
         </ul>      </nav>

      <div class="search">
          <div class="search__overlay js-search-overlay">
            <form action="https://myrealbook.vintherine.org/search.html" class="search__form">
               <input
                  class="search__input js-search-input"
                  type="search"
                  name="q"
                  aria-label="Search input" 
                  placeholder="search..."
                  autofocus="autofocus"/>
               <button class="search__submit">Search</button>
            </form>
         </div>
         <button
            class="search__btn js-search-btn"
            aria-label="Search">
            <svg role="presentation" focusable="false" height="18" width="18">
               <use xlink:href="https://myrealbook.vintherine.org/assets/svg/svg-map.svg#search"/>
            </svg>
         </button>
      </div>

</header>
<main>
   <div class="wrapper">
         <article class="post">
            <header class="post__header">
               <h1 class="post__title">
                  La grille harmonique depuis la version 2.23.10
               </h1>
                  <div class="post__meta">
                        <div class="post__author">By
                              <a href="https://myrealbook.vintherine.org/authors/vincent/" class="invert" rel="author" title="Vincent">Vincent</a>
                        </div>

                  </div>
            </header>

            <div class="post__inner">
               <div class="post__entry">
                  <p>Comme évoqué dans le <a href="https://myrealbook.vintherine.org/passage-en-version-223-de-lilypond.html">post précédant</a> la grille harmonique est maintenant intégrée dans l'application. Par rapport à la fonction écrite en sheme <a href="https://myrealbook.vintherine.org/grille-harmonique.html">décrite ici</a> il y a quelques évolutions significatives.</p>
<p>Les plus importantes sont l'utilisation de la notation proportionnelle qui permet d'avoir des cases exactement de même longueurs d'une ligne à l'autre (pour autant qu'il y en ait le même nombre) et un contexte particulier (ChordGridScore) permettant d'associer une grille à d'autre contexte tels Staff, RhythmicStaff ou Dynamics. </p>
<pre>\new ChordGridScore &lt;&lt;<br>  \new ChordGrid \chordmode { ../.. }<br>  % \new RhythmicStaff ou \new Dynamics...<br>&gt;&gt;</pre>

<h6>exemple avec une portée :</h6>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/33/Staff.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/33/responsive/Staff-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/33/responsive/Staff-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/33/responsive/Staff-md.png 768w"  alt="" width="770" height="163"></figure>
<p>(cet exemple illustre l'usage de la notation proportionnelle) </p>
<pre><code>\version "2.23.10"</code><br><code>\include "lilyjazz.ily"</code><br><br><code>\paper {</code><br><code>  indent = 0</code><br><code>  ragged-right = ##f</code><br><code>  system-system-spacing = #'((basic-distance . 20))</code><br><code>}</code><br><br><code>    \new ChordGridScore { &lt;&lt;</code><br><code>      \new ChordGrid</code><br><code>      \chordmode {</code><br><code>        \repeat unfold 4 { c1:7 } </code><br><code>      }</code><br><code>      \new Staff { </code><br><code>        \omit Staff.Clef \omit Staff.TimeSignature</code><br><code>        \repeat unfold 8 { g'8 } </code><br><code>        \repeat unfold 4 { g'4 } </code><br><code>        \repeat unfold 2 { g'2 }</code><br><code>        g'1</code><br><code>      </code><br><code>      }</code><br><code>  &gt;&gt;</code><br><code>}</code></pre>
<h6>exemple avec une ligne de nuances :</h6>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/33/Dynamics-2.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/33/responsive/Dynamics-2-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/33/responsive/Dynamics-2-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/33/responsive/Dynamics-2-md.png 768w"  alt="" width="773" height="139"></figure>
<pre><code>\version "2.23.10"</code><br><code>\include "lilyjazz.ily" </code><br><br><code>\paper {</code><br><code>  indent = 0</code><br><code>  ragged-right = ##f</code><br><code>  system-system-spacing = #'((basic-distance . 20))</code><br><code>}</code><br><br><code>    \new ChordGridScore &lt;&lt;</code><br><code>      \new ChordGrid</code><br><code>      \chordmode {</code><br><code>        \repeat unfold 4 { c1:7 } \bar ".."</code><br><code>      }</code><br><code>      \new Dynamics { s2 s2 \p \&lt; s1 s1 \f \&gt; s2 s2 \p }</code><br><code>  &gt;&gt;</code></pre>
<h6>exemple avec une portée rythmique :</h6>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/33/GridWithRhythmII.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/33/responsive/GridWithRhythmII-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/33/responsive/GridWithRhythmII-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/33/responsive/GridWithRhythmII-md.png 768w"  alt="" width="779" height="369"></figure>
<p>Notez le contenu du bloc \paper et celui du bloc \layout destinés à maintenir un écart constant entre les lignes de la grille.</p>
<pre><code>\version "2.23.11"</code><br><code>#(set-global-staff-size 18)</code><br><code>\include "lilyjazz.ily"</code><br><code>\include "jazzchords.ily"</code><br><br><code>\paper {</code><br><code>  indent = 0</code><br><code>  ragged-right = ##f</code><br><code>  system-system-spacing =</code><br><code>  #'((basic-distance . 0)</code><br><code>     (minimum-distance . 20)</code><br><code>     (padding . 0)</code><br><code>     (stretchability . 0))</code><br><code>}</code><br><br><code>\layout {</code><br><code>  \context {</code><br><code>    \RhythmicStaff</code><br><code>    \override VerticalAxisGroup.staff-affinity = #DOWN</code><br><code>    \override VerticalAxisGroup.nonstaff-relatedstaff-spacing =</code><br><code>      #'((basic-distance . 0)</code><br><code>         (minimum-distance . 8.5 )</code><br><code>         (padding . 0)</code><br><code>         (stretchability . 0))</code><br><code>    \RemoveAllEmptyStaves</code><br><code>    \improvisationOn</code><br><code>    \override StaffSymbol.line-count = 0</code><br><code>    \remove Time_signature_engraver</code><br><code>    \remove Bar_engraver</code><br><code>  }</code><br><code>}</code><br><br><code>grille = \chordmode {</code><br><code>  \override Score.RehearsalMark.self-alignment-X = #LEFT</code><br><code>  \bar "[|:"</code><br><code>  \repeat volta 2 { \repeat unfold 2 { f1:9+5+ bes:13/d } } \break</code><br><code>  \mark \markup \fontsize #-1 { \box Head \raise #1 \with-color #red \musicglyph "scripts.varsegno" }</code><br><code>    \repeat unfold 2 { f1:9+5+ bes:13/d } \break</code><br><code>    ges2:6.9 e:7 es1 b2:7 f:7 bes1:m \break</code><br><code>}</code><br><br><code>GridRhythm = { s1* 8 \repeat unfold 2 { r4 c4 4. 8~ 1 }}</code><br><br><code>\new ChordGridScore &lt;&lt;</code><br><code>  \new RhythmicStaff \magnifyMusic 0.66 \GridRhythm</code><br><code>  \new ChordGrid \grille</code><br><code>&gt;&gt;</code></pre>
<h6>exemple avec une reprises avec alternatives :</h6>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/33/ReprisesAlternatives.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/33/responsive/ReprisesAlternatives-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/33/responsive/ReprisesAlternatives-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/33/responsive/ReprisesAlternatives-md.png 768w"  alt="" width="786" height="393"></figure>
<p>Rappel du principe : la grille est présentée par blocs de 4 mesures (on peut tenter 8 mais ça ne doit pas être très lisible) et en cas d'alternatives ne sont visibles la deuxième fois  que la ou les mesure(s) différentes.</p>
<p>Dans la version précédente on devait bâtir un système à base de stopStaff / startStaff, de silences invisibles (s1), de barres invisibles (\bar "") et de gestion manuelles des crochets. On peut utiliser maintenant une sorte de portée d'ossia contenant la 2ème alternative. La clef du coup est dans la <a moz-do-not-send="true" href="https://lilypond.org/doc/v2.23/Documentation/notation/displaying-rhythms#polymetric-notation">notation polymétrique</a> qui permet d'avoir des barres de mesures différentes sur l'alternative (voir le \layout). Voir <a href="https://lists.gnu.org/archive/html/lilypond-user-fr/2022-07/msg00059.html">les explications de Jean Abou Samra</a>. </p>
<p><strong>N.B.</strong> : il est important de ne pas mettre \enablePolymeter dans le \layout général (cela pourrait entraîner des effets de bords dans le reste de la partition) mais au niveau d'un \score { }. Ce qui impose d'insérer explicitement ChordGridScore à l'intérieur de celui-ci.</p>
<pre><code>\version "2.23.10"</code><br><code>\include "jazzchords.ily"</code><br><code>\include "lilyjazz.ily"</code><br><br><code>\paper {</code><br><code>  ragged-right = ##f</code><br><code>  indent = 0</code><br><code>}</code><br><code> </code><br><code>\layout {</code><br><code>  \context {</code><br><code>    \ChordGridScore</code><br><code>    \remove Volta_engraver</code><br><code>    \remove Staff_collecting_engraver</code><br><code>    startRepeatBarType = #"[|:"</code><br><code>    endRepeatBarType = #":|]"</code><br><code>    doubleRepeatBarType = #":|][|:"</code><br><code>  }</code><br><code>  \context {</code><br><code>    \ChordGrid</code><br><code>    \consists Volta_engraver</code><br><code>    \consists Staff_collecting_engraver</code><br><code>  }</code><br><code>}</code><br><br>\score {<br>\new ChordGridScore &lt;&lt;<br>  \new ChordGrid \chordmode {<br>    \bar "[|:"<br>    \repeat volta 2 {<br>      \repeat unfold 3 {  c1:7  }<br>      &lt;&lt;<br>        \alternative {<br>          \volta 1 { c1:7 }<br>        }<br>        \new ChordGrid {<br>          \alternative {<br>            \volta 2 { c1:7 \bar "||"  }<br>          }<br>          \stopStaff  }<br>      &gt;&gt;<br>    }<br>    \break<br>    \repeat unfold 4 {  c1:7  }<br>  }<br>  &gt;&gt;<br>  \layout { \enablePolymeter }<br>}</pre>
<h6>exemple avec Polymark :</h6>
<p>(voir Polymark à la fin ce <a href="https://myrealbook.vintherine.org/double-marks.html">cet article</a>). </p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/33/GridWithPolyMarks-2.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/33/responsive/GridWithPolyMarks-2-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/33/responsive/GridWithPolyMarks-2-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/33/responsive/GridWithPolyMarks-2-md.png 768w"  alt="" width="784" height="290"></figure>
<p>Pour que Polymark fonctionne il faut retirer Mark_engraveret Mark_tracking_translator et rajouter #poly-mark-engraver et Tweak_engraver dans le bloc \layout.</p>
<pre>\version "2.23.10"<br>\include "lilyjazz.ily" %facultatif<br>\include "poly-mark-engraver223.ly"<br><br>\paper {<br>  indent = 0<br>  ragged-right = ##f<br>  system-system-spacing = #'((basic-distance . 20))<br>}<br><br><code>\layout {</code><br><code>  \context {</code><br><code>   \ChordGridScore</code><br><code>    rehearsalMarkFormatter = #format-mark-box-alphabet</code><br><code>    \remove "Mark_engraver"</code><br><code>    \remove "Mark_tracking_translator"</code><br><code>   \consists #poly-mark-engraver</code><br><code>   \consists "Tweak_engraver"</code><br><code> }</code><br><code>}</code><br><br><code>\new ChordGridScore {</code><br><code>  \new ChordGrid</code><br><code>  \chordmode {</code><br><code>    \polyMark \default</code><br><code>    \repeat unfold 4 { c1:7 } \break</code><br><code>    \polyMark #'( rue Y (direction . 1) (self-alignment-X . 1.0) (break-visibility . #(#t #f #f))) "Right End Up"</code><br><code>    \polyMark #'( rde Y (direction . -1) (self-alignment-X . 1.0) (break-visibility . #(#t #f #f))) "Right End Down"</code><br><code>    \polyMark \default</code><br><code>    \repeat unfold 4 { c1:7 }</code><br><code>  }</code><br><code>}</code></pre>
<h6>exemple avec des articulations :</h6>
<p>Il y a quelques articulations qu'il serait intéressant d'utiliser dans une grille harmonique. Essentiellement les accents, les marcati et les points d'orgue. C'est possible en ajoutant \consists Script_engraver à ChordGrid. Par contre les articulations se placent où elle veulent et il faut les repositionner à grand coups de \override Script.extra-offset. C'est franchement bidouille et ça mériterait d'être revu dans une éventuelle prochaine version. <br>Notez un \override Script.direction = #'1 nécessaire à  Lilypond pour savoir dans quel sens tourner les articulations.</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/33/Articulations.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/33/responsive/Articulations-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/33/responsive/Articulations-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/33/responsive/Articulations-md.png 768w"  alt="" width="771" height="316"></figure>
<pre><code>\version "2.23.10"</code><br><code>\include "lilyjazz.ily"</code><br><code>\include "jazzchords.ily"</code><br><br><code>\paper {</code><br><code>  indent = 0</code><br><code>  ragged-right = ##f</code><br><code>}</code><br><br><code>\markup \fill-line { \null "Sans \override Script.extra-offset" \null }</code><br><code>\new ChordGridScore {</code><br><code>  \new ChordGrid \with { \consists Script_engraver }</code><br><code>  \chordmode {</code><br><code>    \override Script.direction = #'1</code><br><code>    \repeat unfold 3 { b1:7+ \accent }</code><br><code>    a4:7+ \marcato bes2.:7+ \fermata  }</code><br><code>}</code><br><br><code>\markup \fill-line { \null "Avec \override Script.extra-offset" \null }</code><br><code>\new ChordGridScore {</code><br><code>  \new ChordGrid \with { \consists Script_engraver }</code><br><code>  \chordmode {</code><br><code>    \override Script.direction = #'1</code><br><code>    \repeat unfold 3 { \once \override Script.extra-offset = #'(11.5 . -5) b1:7+ \accent }</code><br><code>    \once \override Script.extra-offset = #'(0.5 . 1.5)  a4:7+ \marcato</code><br><code>    \once \override Script.extra-offset = #'(8 . -5) bes2.:7+ \fermata  }</code><br><code>}</code></pre>
               </div>
                  <footer>


                        <div class="post__tags-share">

                        </div>


                  </footer>
            </div>
         </article>



   </div>

</main>
<footer class="footer">
      <div class="footer__copyright">
         <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a><br />Tous les textes, images et codes sources Lilypond contenus dans ce site sont mis à disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licence Creative Commons Attribution -  Partage dans les Mêmes Conditions 4.0 International</a>.
      </div>
</footer>
<script>
   window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };
</script>
<script defer src="https://myrealbook.vintherine.org/assets/js/scripts.min.js?v=8b3e67b51e8c7a7d51b33f4a94ae4287"></script>
   <script>        
      var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }
   </script>



</body>
</html>
