<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>Un peu de couleur - MyRealBook </title>
        
        <meta name="robots" content="noindex,nofollow" />
        <meta name="generator" content="Publii Open-Source CMS for Static Site" />
        
        
        <link rel="alternate" type="application/atom+xml" href="https://myrealbook.vintherine.org/feed.xml" />
<link rel="alternate" type="application/json" href="https://myrealbook.vintherine.org/feed.json" />

        <meta property="og:title" content="Un peu de couleur" /><meta property="og:site_name" content="MyRealBook" /><meta property="og:description" content="À la lecture d'une grille harmonique un jazzman chevronné sait immédiatement ce que recouvre chaque accord et quelles gammes et arpèges il peut jouer. Un débutant devra au contraire étudier longuement sa partition, repérer les notes fortes, l'annoter et répéter inlassablement les enchaînements caractéristiques tels les II-V-I , les cadences plagale (IV-I), les marches harmoniques...Lorsque j'étais moi-même débutant j'utilisais mes crayons de couleur pour repérer plus visuellement les tonalités, une peu comme ceci :Voyons comment faire ceci avec Lilypond." /><meta property="og:url" content="https://myrealbook.vintherine.org/un-peu-de-couleur.html" /><meta property="og:type" content="article" />
        <style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style>
        <link rel="stylesheet" href="https://myrealbook.vintherine.org/assets/css/style.css?v=489237eb5e2f09dd77c9332d52b3a5e5">       
        <script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://myrealbook.vintherine.org/un-peu-de-couleur.html"},"headline":"Un peu de couleur","datePublished":"2021-12-13T14:52","dateModified":"2021-12-24T17:16","description":"À la lecture d'une grille harmonique un jazzman chevronné sait immédiatement ce que recouvre chaque accord et quelles gammes et arpèges il peut jouer. Un débutant devra au contraire étudier longuement sa partition, repérer les notes fortes, l'annoter et répéter inlassablement les enchaînements caractéristiques tels les II-V-I , les cadences plagale (IV-I), les marches harmoniques...Lorsque j'étais moi-même débutant j'utilisais mes crayons de couleur pour repérer plus visuellement les tonalités, une peu comme ceci :Voyons comment faire ceci avec Lilypond.","author":{"@type":"Person","name":"Vincent"},"publisher":{"@type":"Organization","name":"Vincent"}}</script>        
        
        <link type="application/atom+xml" rel="alternate" href="https://myrealbook.vintherine.org/feed.xml"/>
<link type="application/json" rel="alternate" href="https://myrealbook.vintherine.org/feed.json"/> 
    </head>
    <body>
        <header class="header" id="js-header">

   <a href="https://myrealbook.vintherine.org/" class="logo">
         MyRealBook
   </a>

      <nav class="navbar js-navbar">
         <button class="navbar__toggle js-toggle" aria-label="Menu">
            <span class="navbar__toggle-box">
               <span class="navbar__toggle-inner">Menu</span>
            </span>
         </button>
         <ul class="navbar__menu">
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/index.html"
                        target="_self"
         >
                     Blog
                  </a>
         
            </li>
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/scores/index.html"
                        target="_self"
         >
                     Partitions
                  </a>
         
            </li>
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/about.html"
                        target="_self"
         >
                     À propos
                  </a>
         
            </li>
                  <li>
                  <a
                     href="https://myrealbook.vintherine.org/https://myrealbook.vintherine.org/feed.json"
                        target="_self"
         >
                     Flux RSS
                  </a>
         
            </li>
         </ul>      </nav>

      <div class="search">
          <div class="search__overlay js-search-overlay">
            <form action="https://myrealbook.vintherine.org/search.html" class="search__form">
               <input
                  class="search__input js-search-input"
                  type="search"
                  name="q"
                  aria-label="Search input" 
                  placeholder="search..."
                  autofocus="autofocus"/>
               <button class="search__submit">Search</button>
            </form>
         </div>
         <button
            class="search__btn js-search-btn"
            aria-label="Search">
            <svg role="presentation" focusable="false" height="18" width="18">
               <use xlink:href="https://myrealbook.vintherine.org/assets/svg/svg-map.svg#search"/>
            </svg>
         </button>
      </div>

</header>
<main>
   <div class="wrapper">
         <article class="post">
            <header class="post__header">
               <h1 class="post__title">
                  Un peu de couleur
               </h1>
                  <div class="post__meta">
                        <div class="post__author">By
                              <a href="https://myrealbook.vintherine.org/authors/vincent/" class="invert" rel="author" title="Vincent">Vincent</a>
                        </div>

                  </div>
            </header>

            <div class="post__inner">
               <div class="post__entry">
                  <p>À la lecture d'une grille harmonique un jazzman chevronné sait immédiatement ce que recouvre chaque accord et quelles gammes et arpèges il peut jouer. Un débutant devra au contraire étudier longuement sa partition, repérer les notes fortes, l'annoter et répéter inlassablement les enchaînements caractéristiques tels les II-V-I , les cadences plagale (IV-I), les marches harmoniques...</p>
<p>Lorsque j'étais moi-même débutant j'utilisais mes crayons de couleur pour repérer plus visuellement les tonalités, une peu comme ceci :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/21/LesPassantes.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/21/responsive/LesPassantes-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/21/responsive/LesPassantes-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/21/responsive/LesPassantes-md.png 768w"  alt="Les Passantes de Georges Brassens" width="793" height="391"></figure>
<p>Voyons comment faire ceci avec Lilypond.</p>

<p>Commençons par écrire une partitions ordinaire avec une ou deux voix. Dans l'exemple ci-dessus j'utilise les notes fortes des accords (généralement tierces et septièmes) en guise de guide-ton. Dans chaque mesure j'indique par un changement de clef la tonalité induite par les accords.</p>
<p>Le style Realbook est utilisé comme à l'habitude mais n'est pas indispensable. Voir les posts  <a href="https://myrealbook.vintherine.org/a-propos-des-logiciels-deditions-utilises.html">À propos des logiciels</a>, (partie Lilyjazz) et <a href="https://myrealbook.vintherine.org/titres-a-la-realbook.html">Titres à la Realbook.</a></p>
<p>Pour avoir une barre de reprise avant la première mesure je triche par un \partial 256 s256 (penser à mettre ce s256 également avant les noms d'accords). Cela permet aussi d'indiquer la tonalité initiale à l'intérieur la première mesure. Pour éviter que ce silence ne prenne trop de place au début de la ligne  il est nécessaire d'indiquer à Lilypond d'écrire de façon proportionnelle par le code suivant :</p>
<pre><code>\layout { </code><br><code>  \context { </code><br><code>    \Score </code><br><code>    proportionalNotationDuration = #(ly:make-moment 1/10) </code><br><code>} }</code></pre>
<p>Venons-en maintenant au coloriage des mesures. Elle est possible grâce à la fonction staffColor écrite par Jean Abou Samra et postée dans la liste de discussion des utilisateurs francophones de lilypond. </p>
<pre><code>\version "2.22.1"</code><br><br><code>#(define (define-grob! grob-name grob-entry)</code><br><code>   (set! all-grob-descriptions</code><br><code>         (cons ((@@ (lily) completize-grob-entry)</code><br><code>                (cons grob-name grob-entry))</code><br><code>               all-grob-descriptions)))</code><br><br><code>#(define (staff-colorizer::print grob)</code><br><code>   (let* ((staff-symbol (ly:grob-object grob 'staff-symbol))</code><br><code>          (left (ly:spanner-bound grob LEFT))</code><br><code>          (right (ly:spanner-bound grob RIGHT))</code><br><code>          (refp (ly:grob-system grob))</code><br><code>          (spacing-pair (ly:grob-property grob 'spacing-pair))</code><br><code>          (coord-adjust (ly:grob-relative-coordinate grob refp X))</code><br><code>          (x-span (cons (- (interval-end (ly:paper-column::break-align-width</code><br><code>                                          left</code><br><code>                                          (car spacing-pair)))</code><br><code>                           coord-adjust)</code><br><code>                        (- (interval-start (ly:paper-column::break-align-width</code><br><code>                                            right</code><br><code>                                            (cdr spacing-pair)))</code><br><code>                           coord-adjust)))</code><br><code>          (y-span (ly:grob-extent staff-symbol staff-symbol Y)))</code><br><code>     (make-filled-box-stencil x-span y-span)))</code><br><br><code>#(define-grob!</code><br><code>   'StaffColorizer</code><br><code>   `((stencil . ,staff-colorizer::print)</code><br><code>     (layer . -1)</code><br><code>     (spacing-pair . (staff-bar . staff-bar))</code><br><code>     (meta . ((class . Spanner)</code><br><code>              (interfaces . (text-interface))))))</code><br><br><code>#(set-object-property! 'staffColor 'translation-type? color?)</code><br><br><code>#(define (Staff_colorizer_engraver context)</code><br><code>   (let ((current-color #f)</code><br><code>         (spanner #f))</code><br><code>     (make-engraver</code><br><code>       ((process-music engraver)</code><br><code>          (let ((color (ly:context-property context 'staffColor #f)))</code><br><code>            (if (and color</code><br><code>                     (not (equal? color current-color)))</code><br><code>                (let ((column (ly:context-property context 'currentCommandColumn)))</code><br><code>                  (set! current-color color)</code><br><code>                  (if spanner</code><br><code>                      (ly:spanner-set-bound! spanner RIGHT column))</code><br><code>                  (set! spanner (ly:engraver-make-grob engraver 'StaffColorizer '()))</code><br><code>                  (ly:grob-set-property! spanner 'color current-color)</code><br><code>                  (ly:spanner-set-bound! spanner LEFT column)))))</code><br><code>       ((finalize engraver)</code><br><code>          (if spanner</code><br><code>              (let ((column (ly:context-property context 'currentCommandColumn)))</code><br><code>                (ly:spanner-set-bound! spanner RIGHT column)))))))</code><br><br><code>\layout {</code><br><code>  \context {</code><br><code>    \Global</code><br><code>    \grobdescriptions #all-grob-descriptions</code><br><code>  }</code><br><code>  \context {</code><br><code>    \Staff</code><br><code>    \consists #Staff_colorizer_engraver</code><br><code>  }</code><br><code>}</code><br><br><code>staffColor = \set Staff.staffColor = \etc </code></pre>
<p>j'ai enregistré ce code dans un fichier staffColor.ly que j'appelle dans mes \include</p>
<p>Le code complet :</p>
<pre><code>\version "2.22.1"</code><br><code>#(set-global-staff-size 18)</code><br><code>\include "jazzchords.ily"</code><br><code>\include "lilyjazz.ily"</code><br><code>\include "staffColor.ly"</code><br><br><code>\paper {</code><br><code>  indent = 0\mm</code><br><code>  ragged-last-bottom = ##t</code><br><code>  ragged-bottom = ##f</code><br><code>  ragged-last = ##f</code><br><code>  markup-system-spacing = #'((basic-distance . 23)</code><br><code>                             (minimum-distance . 8)</code><br><code>                             (padding . 1))</code><br><code>}</code><br><br><code>title = #"Les passantes"</code><br><code>composer = #"Georges Brassens"</code><br><code>meter = #"(Ballad)"</code><br><br><code>realBookTitle = \markup {</code><br><code>  \score {</code><br><code>    {</code><br><code>      \override TextScript.extra-offset = #'(0 . -4.5)</code><br><code>      s4</code><br><code>      s^\markup {</code><br><code>        \fill-line {</code><br><code>          \fontsize #1 \lower #1 \rotate #7 \concat { " " #meter }</code><br><code>          \fontsize #4</code><br><code>          \override #'(offset . 9)</code><br><code>          \override #'(thickness . 6)</code><br><code>          \underline \larger \larger #title</code><br><code>          \fontsize #1 \lower #1 \concat { #composer " " }</code><br><code>        }</code><br><code>      }</code><br><code>      s</code><br><code>    }</code><br><code>    \layout {</code><br><code>      \omit Staff.Clef</code><br><code>      \omit Staff.TimeSignature</code><br><code>      \omit Staff.KeySignature</code><br><code>      ragged-right = ##f</code><br><code>    }</code><br><code>  }</code><br><code>}</code><br><br><code>voltaAdLib = \markup { 1. 2. 3… \italic \text "ad lib." }</code><br><code>voltaOnCue = \markup \small \text "Last X"</code><br><br><code>\header {</code><br><code>  pdftitle = #title</code><br><code>  pdfauthor = #composer</code><br><code>  title = \realBookTitle</code><br><code>  tagline = ##f</code><br><code>}</code><br><br><code>\layout {</code><br><code>  \context {</code><br><code>    \Score</code><br><code>    proportionalNotationDuration = #(ly:make-moment 1/10)</code><br><code>    \omit BarNumber</code><br><code>    startRepeatType = #"[|:"</code><br><code>    endRepeatType = #":|]"</code><br><code>    doubleRepeatType = #":|][|:"</code><br><code>    \override Clef #'break-visibility = #'#(#f #f #f)</code><br><code>    \override KeySignature #'break-visibility = #'#(#f #t #t)</code><br><code>    \override SystemStartBar #'collapse-height = #1</code><br><code>  }</code><br><code>  \context { </code><br><code>    \Staff</code><br><code>    printPartCombineTexts = ##f</code><br><code>    \consists "Merge_rests_engraver"</code><br><code>  }</code><br><code>  \context {</code><br><code>    \ChordNames</code><br><code>    \override ParenthesesItem.font-size = #2</code><br><code>  }</code><br><code>  \context { \Score markFormatter = #format-mark-box-alphabet }</code><br><code>}</code><br><br><br><code>accords = \chordmode {</code><br><code>  \set chordChanges = ##t</code><br><code>  s512</code><br><code>  f1:7+ e:7 a:7 d:7 d:m7 g:7 c:7+ e:7 </code><br><code>  f1:7+ e:7 a:7 d:7 a:m7 g:7 a:m7 g2:m7 c:7 a1:m </code><br><code>}</code><br><br><code>theNotes =  \relative c''' {</code><br><code>  \clef "treble" \time 4/4</code><br><code>  \partial 512 s512</code><br><code>  %\showStartBar \bar "[|:"</code><br><code>  \set Staff.explicitKeySignatureVisibility = ##(#f #t #t)</code><br><code>  \override Staff.KeyCancellation.break-visibility = #all-invisible </code><br><br><code>  \repeat volta 2</code><br><code>  {</code><br><code>    &lt;&lt; </code><br><code>      { \key f \major \staffColor aqua a1 </code><br><code>        \key a \major \staffColor pink  gis </code><br><code>        \key d \major \staffColor orange g! </code><br><code>        \key g \major \staffColor yellow fis \break </code><br><code>        \key c \major \staffColor Chartreuse f! f e </code><br><code>        \key a \major \staffColor pink d \break</code><br><code>        \key f \major \staffColor aqua e </code><br><code>        \key a \major \staffColor pink d </code><br><code>        \key d \major \staffColor orange cis </code><br><code>        \key g \major \staffColor yellow c! \break </code><br><code>        \once \override Staff.KeyCancellation.break-visibility = ##(#f #t #t)</code><br><code>        \key c \major \staffColor Chartreuse c b c  } </code><br><code>      \\ </code><br><code>      { e d cis c </code><br><code>        c b b gis</code><br><code>        a gis g! fis</code><br><code>        g f c </code><br><code>      } </code><br><code>    &gt;&gt;</code><br><code>  }</code><br><code>  \alternative {</code><br><code>    { </code><br><code>      \overrideProperty Score.VoltaBracket.text \voltaAdLib</code><br><code>      &lt;&lt; { \key f \major \staffColor aqua bes' } \\ { f2 e } &gt;&gt; }</code><br><code>    { </code><br><code>      \overrideProperty Score.VoltaBracket.text \voltaOnCue</code><br><code>      &lt;&lt; { \key c \major \staffColor Chartreuse c'1 } \\ { e,1 } &gt;&gt; \bar ".." }</code><br><code>  }</code><br><code>}</code><br><br><code>    \score {</code><br><code>      &lt;&lt;</code><br><code>        \new ChordNames { \accords }</code><br><code>        \new Staff \theNotes</code><br><code>      &gt;&gt;</code><br><code>} </code></pre>
<p> </p>
               </div>
                  <footer>


                        <div class="post__tags-share">

                        </div>


                  </footer>
            </div>
         </article>



   </div>

</main>
<footer class="footer">
      <div class="footer__copyright">
         <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a><br />Tous les textes, images et codes sources Lilypond contenus dans ce site sont mis à disposition selon les termes de la <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licence Creative Commons Attribution -  Partage dans les Mêmes Conditions 4.0 International</a>.
      </div>
</footer>
<script>
   window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };
</script>
<script defer src="https://myrealbook.vintherine.org/assets/js/scripts.min.js?v=8b3e67b51e8c7a7d51b33f4a94ae4287"></script>
   <script>        
      var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }
   </script>


</body>
</html>
